## 论文中的数据收集方式

<figure style="text-align: center;">
  <img src="https://raw.githubusercontent.com/ranyu0802/imgrepo/main/assets/test_picgo7/diffuseloco_data_collect.png" width="50%">
  <figcaption>DiffuseLoco里的数据收集方式</figcaption>
</figure>





## `legged_gym`中数据收集的修改




### 代码相关
`Config`中的设置
```python
class env:
   episode_length_s = 20
# decimation: Number of control action updates @ sim DT per policy DT
class control:
   decimation = 4
class sim:
   dt =  0.005
class commands:
   resampling_time = 10. # time before command are changed[s]
```

`legged_robot.py`中的`velocity command`重新采样

```python
# Simulation Time Step
self.dt = self.cfg.control.decimation * self.sim_params.dt # 0.02s

# 在legged_robot.py 中  _post_physics_step_callback
env_ids = (self.episode_length_buf % int(self.cfg.commands.resampling_time / self.dt)==0).nonzero(as_tuple=False).flatten()
```

